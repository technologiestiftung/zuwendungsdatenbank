"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var binChart=function(t,n,r,e,a){var o,c,i={},u=e,f=a,s=[],l=r,d=guid(),p=!0,y=JSON.parse(JSON.stringify(n)),m=t,h=n,g=d3.scaleLinear().domain([0,y.reduce(function(t,n){return"object"==_typeof(t)&&(t=t.value),t+n.value})]),b=m.append("svg").classed("bin_chart",!0),v=b.append("defs"),x=d3.scaleLinear().domain([y[0].from,y[y.length-1].to]).range(["rgba(11,138,221,0.1)","rgba(11,138,221,1)"]),G=d3.scaleLinear().domain([y[0].from,y[y.length-1].to]).range(["rgba(231,4,51,0.1)","rgba(231,4,51,1)"]);v.selectAll("linearGradient.blue").data(y).enter().append("linearGradient").attr("class","blue").attr("id",function(t,n){return"binGrad".concat(n,"-").concat(d)}).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").html(function(t){return'<stop offset="0%" style="stop-color:'.concat(x(t.from),';stop-opacity:1" /><stop offset="100%" style="stop-color:').concat(x(t.to),';stop-opacity:1" />')}),v.selectAll("linearGradient.red").data(y).enter().append("linearGradient").attr("class","red").attr("id",function(t,n){return"binGrad-red-".concat(n,"-").concat(d)}).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").html(function(t){return'<stop offset="0%" style="stop-color:'.concat(G(t.from),';stop-opacity:1" /><stop offset="100%" style="stop-color:').concat(G(t.to),';stop-opacity:1" />')});var S=0;y.forEach(function(t,n){y[n].before=S,S+=t.value});b.append("g").attr("transform","translate(10,20)");var w=b.append("g").attr("transform","translate(10,20)").selectAll("g").data(y).enter().append("g").attr("class","binGs").on("click",function(t,n){u(f,n)}),E=w.append("rect").attr("class","blue-rect").datum(function(t,n){return h[n]}).attr("height",10).style("fill",function(t,n){return"url(#binGrad".concat(n,"-").concat(d,")")}),_=w.append("rect").attr("class","red-rect").datum(function(t,n){return h[n]}).attr("height",10).style("fill",function(t,n){return"url(#binGrad-red-".concat(n,"-").concat(d,")")}),j=w.append("text").attr("dx",8).attr("dy",16).style("fill","#000"),k=j.append("tspan").text(function(t){return t.value}).style("font-weight","bold");return 1==y[0].from?j.append("tspan").text(function(t){return t.to>1?" Empfänger mit "+t.from+(t.to==t.from?"":" bis "+t.to)+" Projekten":" Empfänger mit einem Projekt"}):j.append("tspan").text(function(t){return" ".concat(l," ").concat(t.from!=t.to?"zwischen "+currency(t.from,!0)+" und "+currency(t.to,!0):"von "+currency(t.to,!0))}),i.init=function(){i.resize()},i.data=function(t,n){n.forEach(function(t,r){n[r]=parseInt(n[r])}),h=t,s=n,E.datum(function(t,n){return h[n]}),_.datum(function(t,n){return h[n]}),k.datum(function(t,n){return h[n]}),b.classed("hasSelection",s.length>0),i.update()},i.update=function(){w.classed("selected",function(t,n){return s.indexOf(n)>-1}),E.transition().duration(p?0:500).attr("height",function(t){return g(t.value)}),_.transition().duration(p?0:500).attr("height",function(t){return g(t.value)}),k.text(function(t){return t.value}),p=!1},i.resize=function(){o=m.node().offsetWidth,c=m.node().offsetHeight,g.range([0,c-20-1*y.length]),w.attr("transform",function(t,n){return"translate(0,".concat(g(t.before)+1*n,")")}).attr("height",function(t){return g(t.value)}),E.attr("width",o-20),_.attr("width",o-20),b.attr("width",o),b.attr("height",c),i.update()},i};