"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var binChart=function(t,n,e,r,a){var o,c,i={},u=r,f=a,l=[],s=e,d=guid(),p=!0,y=JSON.parse(JSON.stringify(n)),h=t,m=n,b=d3.scaleLinear().domain([0,y.reduce(function(t,n){return"object"==_typeof(t)&&(t=t.value),t+n.value})]),g=h.append("svg").classed("bin_chart",!0),v=g.append("defs"),x=d3.scaleLinear().domain([y[0].from,y[y.length-1].to]).range(["rgba(11,138,221,0.1)","rgba(11,138,221,1)"]),G=d3.scaleLinear().domain([y[0].from,y[y.length-1].to]).range(["rgba(231,4,51,0.1)","rgba(231,4,51,1)"]);v.selectAll("linearGradient.blue").data(y).enter().append("linearGradient").attr("class","blue").attr("id",function(t,n){return"binGrad".concat(n,"-").concat(d)}).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").html(function(t){return'<stop offset="0%" style="stop-color:'.concat(x(t.from),';stop-opacity:1" /><stop offset="100%" style="stop-color:').concat(x(t.to),';stop-opacity:1" />')}),v.selectAll("linearGradient.red").data(y).enter().append("linearGradient").attr("class","red").attr("id",function(t,n){return"binGrad-red-".concat(n,"-").concat(d)}).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").html(function(t){return'<stop offset="0%" style="stop-color:'.concat(G(t.from),';stop-opacity:1" /><stop offset="100%" style="stop-color:').concat(G(t.to),';stop-opacity:1" />')});var S=0;y.forEach(function(t,n){y[n].before=S,S+=t.value});g.append("g").attr("transform","translate(10,20)");var w=g.append("g").attr("transform","translate(10,20)").selectAll("g").data(y).enter().append("g").attr("class","binGs").on("click",function(t,n){u(f,n)}),_=w.append("rect").attr("class","blue-rect").datum(function(t,n){return m[n]}).attr("height",10).style("fill",function(t,n){return"url(#binGrad".concat(n,"-").concat(d,")")}),j=w.append("rect").attr("class","red-rect").datum(function(t,n){return m[n]}).attr("height",10).style("fill",function(t,n){return"url(#binGrad-red-".concat(n,"-").concat(d,")")}),A=w.append("text").attr("dx",8).attr("dy",16).style("fill","#000"),L=A.append("tspan").text(function(t){return t.value}).style("font-weight","bold");return 1==y[0].from?A.append("tspan").text(function(t){return t.to>1?" Recipient of "+t.from+(t.to==t.from?"":" to "+t.to)+" projects":" Recipient of one project"}):A.append("tspan").text(function(t){return" ".concat(s," ").concat(t.from!=t.to?"between "+currency(t.from,!0)+" and "+currency(t.to,!0):"of "+currency(t.to,!0))}),i.init=function(){i.resize()},i.data=function(t,n){n.forEach(function(t,e){n[e]=parseInt(n[e])}),m=t,l=n,_.datum(function(t,n){return m[n]}),j.datum(function(t,n){return m[n]}),L.datum(function(t,n){return m[n]}),g.classed("hasSelection",l.length>0),i.update()},i.update=function(){w.classed("selected",function(t,n){return l.indexOf(n)>-1}),_.transition().duration(p?0:500).attr("height",function(t){return b(t.value)}),j.transition().duration(p?0:500).attr("height",function(t){return b(t.value)}),L.text(function(t){return t.value}),p=!1},i.resize=function(){o=h.node().offsetWidth,c=h.node().offsetHeight,b.range([0,c-20-1*y.length]),w.attr("transform",function(t,n){return"translate(0,".concat(b(t.before)+1*n,")")}).attr("height",function(t){return b(t.value)}),_.attr("width",o-20),j.attr("width",o-20),g.attr("width",o),g.attr("height",c),i.update()},i};